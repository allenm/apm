#!/usr/bin/env node

var runCommands = require('../lib/run-commands');

runCommands([
  'mocha-browser _site/tests/runner.html -S'
])(done);

runCommands([
  'mocha-browser _site/tests/runner.html?dist -S'
])(done);

var output = '_site/coverage.html';
var done = this.async();
runCommands([
  'rm -fr _site/src-cov',
  'jscoverage --encoding=utf8 src _site/src-cov',
  'mocha-browser _site/tests/runner.html?cov -S -R html-cov > ' + output
])(function() {
  console.log();
  grunt.log.writeln('coverage build to ' + output);
  done();
});
